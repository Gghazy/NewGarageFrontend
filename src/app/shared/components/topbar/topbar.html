<nav class="navbar-wrapper" [attr.dir]="lang === 'ar' ? 'rtl' : 'ltr'">
  <div class="navbar-top">
    <!-- Start: Hamburger (mobile) + Brand -->
    <div class="navbar-start">
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#garageNavbar">
        <span class="navbar-toggler-icon"></span>
      </button>
      <a class="navbar-brand" routerLink="/features">
        <i class="bi bi-search"></i>
        <span>{{ 'MENU.GARAGE' | translate }}</span>
      </a>
    </div>

    <!-- End: Actions -->
    <div class="navbar-actions">
      <button type="button" class="action-btn" (click)="toggleLang()">
        {{ lang === 'ar' ? 'EN' : 'AR' }}
      </button>

      <button type="button" class="action-btn" (click)="toggleTheme()"
        [attr.title]="themeService.isDarkMode() ? 'Light Mode' : 'Dark Mode'">
        <i [class]="themeService.isDarkMode() ? 'bi bi-sun-fill' : 'bi bi-moon-fill'"></i>
      </button>

      <div class="dropdown">
        <button class="user-btn" data-bs-toggle="dropdown">
          <span class="user-avatar">{{ employeeInitials() }}</span>
          <i class="bi bi-chevron-down user-chevron"></i>
        </button>
        <ul class="dropdown-menu" [class.dropdown-menu-start]="lang === 'ar'" [class.dropdown-menu-end]="lang !== 'ar'">
          <li class="dropdown-user-info">
            <span class="dropdown-user-name">{{ employeeName() }}</span>
          </li>
          <li><hr class="dropdown-divider" /></li>
          <li>
            <a class="dropdown-item" routerLink="/features/profile">
              <i class="bi bi-person"></i> {{ 'MENU.PROFILE' | translate }}
            </a>
          </li>
          <li><hr class="dropdown-divider" /></li>
          <li>
            <button class="dropdown-item text-danger" (click)="logout()">
              <i class="bi bi-box-arrow-right"></i> {{ 'MENU.LOGOUT' | translate }}
            </button>
          </li>
        </ul>
      </div>
    </div>
  </div>
</nav>

<!-- Secondary Menu Bar -->
<div class="secondary-menu-bar" [attr.dir]="lang === 'ar' ? 'rtl' : 'ltr'">
  <ul class="secondary-nav">
    <li class="nav-item dropdown" *ngFor="let parent of menu()">
      <a class="nav-link dropdown-toggle" [class.active]="isParentActive(parent)"
        role="button" data-bs-toggle="dropdown">
        <i [class]="parent.icon || ''"></i>
        <span>{{ parent.labelKey | translate }}</span>
      </a>
      <ul class="dropdown-menu" [class.dropdown-menu-end]="lang !== 'ar'">
        <li *ngFor="let child of parent.children">
          <a class="dropdown-item" [routerLink]="child.route" routerLinkActive="active">
            <i *ngIf="child.icon" [class]="child.icon"></i>
            {{ child.labelKey | translate }}
          </a>
        </li>
      </ul>
    </li>
  </ul>
</div>
